# Для запуска приложения из корневого каталога выполните команду (требуется наличие установленного и настроенного pgAdmin и .env файлов (с необходимыми переменными окружения) для клиента и сервера):

**_yarn development_**

[описание переменных .env файлов для запуска проекта](./environment-vars.md)

[установка pgAdmin для запуска проекта в режиме разработки](https://www.enterprisedb.com/postgresql-tutorial-resources-training?uuid=7ce7e93f-e1eb-4e42-85fa-84c0c98859ee&campaignId=7012J000001h3GiQAI)

## Название проекта: RS Social

## Тип проекта: социальная сеть

## Стек технологий: PERN(PostgreSQL, Express, React, Node.js) + Socket.IO

## Деплой: Heroku + Heroku Postgres - [ссылка](https://rss-social.herokuapp.com/)

### Общие возможности (client-server):

#### 1. Система ролей: USER (обычные права), ADMIN (расширенные права: удаление и повышение в правах других пользователей, удаление постов и комментариев USER пользователей)

#### 2. Постоянное клиент-серверное соединение через WebSocket (Socket.IO)

#### 3. HTTP-запросы, использующие REST-API архитектуру

#### 4. Приложение размещено на сервере Heroku с подключенной базой данных Heroku Postgres

### Возможности клиентской части (Front-End):

#### Использованные модули: @reduxjs/toolkit, react-router-dom, node-sass, @emotion, @mui, async-lz-string, crypto-js, draft-js, emoji-picker-react, jwt-decode, socket.io-client, typescript, eslint, prettier

1. Использован MVC паттерн через Redux Toolkit
2. Выполнение HTTP запросов с последующим обновлением глобального стейта (model) с применением Thunk Middleware
3. Использование local strorage для сохранения  текущих настроек (язык приложения, данные аутентификации, текущая тема приложения)
4. Реализован роутинг без перезагрузки страницы
5. Реализовано автоматическое обновление глобального стейта (model) и ререндер страницы при добавлении и удалении поста, получении и удалении сообщения, изменении никнейма пользователем через WebSocket
6. Реализовано отображение количества пользователей онлайн с автообновлением
7. Реализовано оповещение пользователя различными сообщениями двух типов (success, error)  
8. Реализован responsive дизайн для просмотра приложения на различных устройствах
9. Реализовано переключение между двумя языками
10. Реализовано множество модальных, диалоговых окон
11. Возможность кастомизации приложения через выбор темы оформления
12. Реализованы анимации кнопок и других элементов, а также на странице загрузки и лоадера с помощью @keyframes, transitions
13. Приложение выполнено в едином стиле с использованием MUI CSS фреймворка
14. Использовано браузерное API для записи медиа (видео, аудио) для добавления его в пост
15. Реализована возможность изменять информацию пользователя (никнейм, пароль, страну, город и т.п. а также аватар и роль)
16. Реализована возможность создавать, изменять, удалять посты с добавлением к ним медиафайлов
17. Реализована возможность добавления, удаления лайков для постов и отображения их количества в каждом посте
18. Реализована возможность отправки, удаления сообщений другим пользователям с автоматическим обновлением чата, диалогов, количества непрочитанных сообщений
19. Реализован логотип приложения
20. Реализована возможность посещения страниц других пользователей, а также их поиск 
21. Реаизована возможность просмотра всех постов пользователей
22. Отображение элементов (кнопок и т.п.) в зависимости от роли текущего пользователя: для администратора это кнопки удаления пользователя, повышения его роли, дополнительная информация о пользователе, также имеется возможность отказа от прав администратора
23. Реализована возможность добавления, изменения, удаления комментария для конкретного поста и отображения их количества для каждого поста
24. Реализовано отображение информации о дате создания и редактирования постов и комментариев
25. Реализована возможность выбора аватарок по умолчанию из списка
26. Множество всплывающих подсказок при наведении, клике на элементы
27. Реаизовано добавление эмоджи смайликов в комментарии, сообщения, посты
28. Продвинутое редактирование содержимого в постах через draft-js
29. Возможность копирования ссылок на посты
30. Реализовано шифрование/дешифрование сообщений на клиенте

### Возможности серверной части (Back-end):

#### Использованные модули: express, bcryptjs, formidable, jsonwebtoken, concurrently, nodemon, typescript, cross-env, dotenv, pg, pg-hstore, sequelize, socket.io

1. Использование Node.js с фреймворком Express для создания сервера
2. Использование TypeScript при написании серверного кода
3. Для хранения данных используется реляционная база данных PostgreSQL (через Sequelize ORM)
4. Данные в БД хранятся в 5 моделях таблиц (User, Post, Comment, Message и Like), связанных между собой
5. Использование промежуточных обработчиков (middleware) при обработке запросов: check-auth (проверяет наличие авторизации пользователя при выполении запроса), role-id-access (проверяет отправленный JWT токен и расширяет запрос дополнительными полями - id и role), error-handling (позволяет использовать собственный объект API ошибки)
6. Обработка запросов по 20 маршрутам (роутам), корневой роутер объединяет 5 отдельных роутеров (их функционирование возможно проверить в devtools во вкладке network):

 - user:

6.1 GET /api/user/authcheck - запрос на проверку авторизации и валидности JWT токена

6.2 GET /api/user/:userId - запрос на получение информации конкретного пользователя

6.3 GET /api/user/ - запрос на получене пользователей по search-key (поиск пользователей)

6.4 POST /api/user/registration - запрос на регистрацию пользователя

6.5 POST /api/user/login - запрос на авторизацию пользователя

6.6 PUT /api/user/:id/update - запрос на изменение информации конкретного пользователя, его роли или изменение, удаление его аватарки

6.7 DELETE /api/user/:id/delete - запрос на удаление конкретного пользователя

- post

6.8 GET /api/post/:id - запрос на получение информации конкретного поста

6.9 GET /api/post/ - запрос на получение информации о всех постах

6.10 POST /api/post/:id/creation - запрос на создание поста

6.11 PUT /api/post/:id/update - запрос на изменение конкретного поста

6.12 DELETE /api/post/:id/delete - запрос на удаление конкретного поста


- сomment

6.13 POST /api/comment/:postId/:userId/creation - запрос на создание комментария к посту

6.14 DELETE /api/comment/:id/delete - запрос на удаление конкретного комментария

6.15 PUT /api/comment/:id/update - запрос на изменение конкретного комментария к посту


- message

6.16 POST /api/message/send - запрос на отправку сообщения конкретному пользователю

6.17 GET /api/message/:userId/:interlocutorId - запрос на получение сообщений конкретного диалога

6.18 DELETE /api/message/:id/delete - запрос на удаление конкретного сообщения

- like

6.19 POST /api/like/:postId/:userId/creation - запрос на добавление лайка для конкретного поста

6.20 DELETE /api/like/:id/delete - запрос на удаление лайка конкретного поста


7. Реализована авторизация и аутентификация пользователей по JWT токену: при каждом запуске приложения выполняется проверка JWT токена, если он был выдан, на валидность и истечение его срока действия (его время жизни - 24 часа). При регистрации/входе в систему выполняется проверка на соответствие пароля и уникальности соответствующих полей. Отправляются корректные сообщения в ответ на такие запросы
8. Реализовано сохранение файлов пользователя (изображения аватарок и файлов постов) в соответствующих директориях. При удалении пользователя, его директория удаляется
9. Шифрование пароля пользователя при его регистрации необратимое, при авторизации сверяется только хеш пароля
10. Серверная часть разделена на микросервисы (контроллеры, роутеры, middleware)
11. Настроены WebSocket и обрабатывают события
12. Реализована защита от несанкционированных запросов (выполняется сверка идентификаторов, ролей, JWT токена, а также на соответствие с данными в базе данных)
13. Реализована проверка доступности выбранного никнейма или email при регистрации
