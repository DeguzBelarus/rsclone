# RS Social

RS Social - это полноценная социальная сеть, в которой пользователи после регистрации получают возможность создавать посты, комментировать посты других пользователей и общаться между собой через чаты. Приложение доступно по адресу [rss-social.herokuapp.com](https://rss-social.herokuapp.com/).

## Запуск приложения для тестирования

```
git clone https://github.com/DeguzBelarus/rsclone.git
cd rsclone
git checkout develop
yarn install && yarn development
```

Приложение требует установленного `yarn` и базы данных `postgresql`.

Полезные ссылки:

- [описание переменных .env файлов для запуска проекта](./environment-vars.md)
- [установка pgAdmin для запуска проекта в режиме разработки](https://www.enterprisedb.com/postgresql-tutorial-resources-training?uuid=7ce7e93f-e1eb-4e42-85fa-84c0c98859ee&campaignId=7012J000001h3GiQAI)

## Стек технологий и деплой

- [PERN](https://www.geeksforgeeks.org/what-is-pern-stack/) (PostgreSQL, Express, React, Node.js)
- [Socket.IO](https://socket.io/)
- Деплой: Heroku + Heroku Postgres - [ссылка](https://rss-social.herokuapp.com/)

## Общие возможности приложения (client-server):

- HTTP-запросы, использующие **REST-API** архитектуру

- Постоянное клиент-серверное соединение через **WebSocket** (Socket.IO)

- Приложение размещено на **сервере Heroku** с подключенной базой данных Heroku Postgres

- Система ролей: **USER** (обычные права), **ADMIN** (расширенные права: удаление и повышение в правах других пользователей, удаление постов и комментариев USER пользователей)

### Клиентская часть (Front-End):

- **Использованные модули**: `@reduxjs/toolkit`, `react-router`, `node-sass`, `@emotion`, `@mui`, `async-lz-string`, `crypto-js`, `draft-js`, `emoji-picker-react`, `jwt-decode`, `socket.io-client`, `typescript`, `eslint`, `prettier`

- Для написания кода использовался `typescript` и `React` в функциональном стиле.

### Серверная часть (Back-end)

- **Использованные модули**: `express`, `bcryptjs`, `formidable`, `jsonwebtoken`, `concurrently`, `nodemon`, `typescript`, `cross-env`, `dotenv`, `pg`, `pg-hstore`, `sequelize`, `socket.io`

## Критерии оценки (620 баллов)

### Front-end +370

- **Верстка и дизайн приложения +40**

  - Приложение работает на экранах с шириной `>300px` **+10**
  - Поддерживаются 2 языка и автоопределения языка пользователя **+10**
  - Поддерживаются 2 темы приложения - темная и светлая **+10**
  - выполнено в едином стиле с использованием MUI CSS фреймворка и кастомных компонентов **+10**

- **State Management +90**

  - Использован MVC паттерн через Redux Toolkit **+20**
  - Выполнение HTTP запросов с последующим обновлением глобального стейта (model) с применением Thunk Middleware **+20**
  - Использование local strorage для сохранения текущих настроек (язык приложения, данные аутентификации, текущая тема приложения) **+10**
  - Реализовано автоматическое обновление глобального стейта (model) и ререндер страницы при добавлении и удалении поста, получении и удалении сообщения, изменении никнейма пользователем через WebSocket **+30**
  - Реализовано оповещение пользователя различными сообщениями двух типов (success, error) **+10**

- **Routing +10**

  - Реализован роутинг без перезагрузки страницы **+10**

- **Пользователи +70**

  - Реализована возможность изменять информацию пользователя (никнейм, пароль, страну, город и т.п. а также аватар и роль) в настройках пользователя **+20**
  - Реализована возможность выбора аватарок по умолчанию из списка **+10**
  - Реализована возможность посещения страниц других пользователей, а также их поиск **+20**
  - Реализована возможность просмотра всех постов пользователей **+10**
  - Отображение элементов (кнопок и т.п.) в зависимости от роли текущего пользователя: для администратора это кнопки удаления пользователя, повышения его роли, дополнительная информация о пользователе, также имеется возможность отказа от прав администратора **+10**

- **Посты +80**

  - Реализована возможность создавать, изменять, удалять посты с добавлением к ним медиафайлов **+20**
  - Реализована возможность добавления, удаления лайков для постов и отображения их количества в каждом посте **+10**
  - Использовано браузерное API для записи медиа (видео, аудио) для добавления его в пост **+20**
  - Продвинутое форматирование содержимого в постах с помощью тулбара и отображение содержимого через `draft-js` **+20**
  - Возможность копирования ссылок на посты **+10**

- **Комментарии +30**

  - Реализована возможность добавления, изменения, удаления комментария для конкретного поста и отображения их количества для каждого поста **+20**
  - Inline редактирование своих комментариев **+10**

- **Сообщения +30**

  - Реализована возможность отправки, удаления сообщений другим пользователям с автоматическим обновлением чата, диалогов, количества непрочитанных сообщений **+20**
  - Реализовано шифрование/дешифрование сообщений на клиенте **+10**

- **Общее +20**
  - Реализовано отображение информации о дате создания и редактирования постов и комментариев в _human-readable_ формате **+10**
  - Реализовано добавление эмоджи смайликов в комментарии, сообщения, посты **+10**

### Back-end +250

- **Общее +120**

  - Использование Node.js с фреймворком Express для создания сервера **+10**
  - Подключение базы данных `PostgreSQL` через `Sequelize ORM` **+20**
  - Создание 5-ти моделей таблиц (User, Post, Comment, Message и Like), связанных между собой **+30**
  - Использование middleware при обработке запросов: check-auth (проверяет наличие авторизации пользователя при выполении запроса), role-id-access (проверяет отправленный JWT токен и расширяет запрос дополнительными полями - id и role), error-handling (позволяет использовать собственный объект API ошибки) **+30**
  - Авторизация и аутентификация пользователей по JWT токену **+20**
  - Сохранение файлов пользователя (изображения аватарок и файлов постов) в соответствующих директориях. При удалении пользователя, его директория удаляется **+10**
  - Настроены WebSocket и обрабатывают события **+20**
  - Реализована проверка доступности выбранного никнейма или email при регистрации **+10**

- **API Routes +100**
  Обработка запросов по 20 маршрутам (роутам), корневой роутер объединяет 5 отдельных роутеров (их функционирование возможно проверить в devtools во вкладке network) **+100**

- [Описание всех роутов сервера](./endpoints.md)
